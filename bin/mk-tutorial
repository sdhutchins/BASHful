#!/bin/bash
# ------------------------------------------------------------------
# [Shaurita D. Hutchins] create-tutorial
#          This script creates directory structure for tutorial folders.
#          Usage: create-tutorial <tutorial_name> <language (R or Python)>
#

# Check if the correct number of arguments is provided
if [ $# -ne 2 ]; then
    echo "Usage: $0 <tutorial_name> <language (R or Python)>"
    exit 1
fi

# Capture the arguments
TUTORIAL_NAME=$1
LANGUAGE=$2

# Create the main tutorial directory
mkdir -p "$TUTORIAL_NAME"

# Navigate into the directory
cd "$TUTORIAL_NAME" || exit

# Create necessary subdirectories
mkdir -p data output

# Create .gitkeep files in data and output folders
touch data/.gitkeep
touch output/.gitkeep

# Create the README.md file with the tutorial name
echo "# $TUTORIAL_NAME" > README.md

# Create the test file and .gitignore based on the specified language
if [ "$LANGUAGE" == "Python" ]; then
    echo "print('Hello, this is a Python tutorial')" > test.py
    echo -e "# Byte-compiled / optimized / DLL files\n__pycache__/\n*.py[cod]\n*$py.class\n\n# C extensions\n*.so\n\n# Packages\n*.egg\n*.egg-info/\ndist/\nbuild/\n.eggs/\n\n# Virtual environments\n.env\n.venv\nvenv/\nENV/\n\n# PyInstaller\n*.manifest\n*.spec\n\n# Installer logs\npip-log.txt\npip-delete-this-directory.txt\n\n# Unit test / coverage reports\nhtmlcov/\n.tox/\n.nox/\n.coverage\n.coverage.*\n.cache\nnosetests.xml\ncoverage.xml\n*.cover\n*.py,cover\n\n# Jupyter Notebook\n.ipynb_checkpoints\n\n# pyenv\n.python-version\n\n# mypy\n.mypy_cache/\n.dmypy.json\n.dmypy.log\n" > .gitignore
    echo -e "\n# Command to create a virtual environment:" >> README.md
    echo "python -m venv venv" >> README.md
elif [ "$LANGUAGE" == "R" ]; then
    echo "print('Hello, this is an R tutorial')" > test.R
    echo -e "# History files\n.Rhistory\n.Rapp.history\n\n# Session Data files\n.RData\n\n# User-specific files\n.Ruserdata\n\n# Example code in package build process\n*-Ex.R\n\n# Output files from R CMD build\n/*.tar.gz\n\n# Output files from R CMD check\n/*.Rcheck/\n\n# RStudio files\n.Rproj.user/\n.Rproj.user\n*.Rproj\n.Rproj\n\n# Produced vignettes\nvignettes/*.html\nvignettes/*.pdf\n\n# OAuth2 token, see https://github.com/hadley/httr/releases/tag/v0.3\n.httr-oauth\n\n# Knitr and R markdown default cache directories\n*_cache/\n\n# Temporary files created by R markdown\n*.utf8.md\n*.knit.md\n\n# R Environment Variables\nRenviron\n.Renviron\n" > .gitignore
else
    echo "Unsupported language. Please specify 'Python' or 'R'."
    exit 1
fi

echo "Tutorial structure created successfully for $LANGUAGE."
